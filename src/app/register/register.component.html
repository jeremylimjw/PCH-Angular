<div class="sub-container">
    <mat-horizontal-stepper linear style="max-width: 900px;margin: auto;">

        <mat-step [stepControl]="accountForm">

            <ng-template matStepLabel>Account</ng-template>

            <mat-card>

                <div [formGroup]="accountForm">
                    <mat-form-field appearance="fill">
                        <mat-label>Username*</mat-label>
                        <input matInput formControlName="username">
                    </mat-form-field>
                    <mat-form-field appearance="fill">
                        <mat-label>Email*</mat-label>
                        <input matInput type="email" formControlName="email">
                    </mat-form-field>
                    <mat-form-field appearance="fill">
                        <mat-label>Password*</mat-label>
                        <input matInput type="password" formControlName="password">
                    </mat-form-field>
                    <mat-form-field appearance="fill">
                        <mat-label>Confirm Password*</mat-label>
                        <input matInput type="password" formControlName="cPassword">
                    </mat-form-field>
                </div>

                <mat-card-actions style="text-align: right;">
                    <button mat-button matStepperNext>NEXT</button>
                </mat-card-actions>

            </mat-card>

        </mat-step>

        <mat-step [stepControl]="detailsForm">

            <ng-template matStepLabel>Personal</ng-template>

            <mat-card>

                <div [formGroup]="detailsForm">
                    <mat-form-field appearance="fill">
                        <mat-label>Name*</mat-label>
                        <input matInput formControlName="name">
                    </mat-form-field>
                    <mat-form-field appearance="fill">
                        <mat-label>NRIC*</mat-label>
                        <input matInput formControlName="nric">
                    </mat-form-field>
                    <mat-form-field appearance="fill">
                        <mat-label>Date of birth*</mat-label>
                        <input matInput type="date" formControlName="dob">
                    </mat-form-field>
                    <mat-form-field appearance="fill">
                        <mat-label>Contact Number*</mat-label>
                        <input matInput formControlName="contactNumber">
                    </mat-form-field>
                    <mat-form-field appearance="fill">
                        <mat-label>Address</mat-label>
                        <input matInput formControlName="address">
                    </mat-form-field>
                    
                    <mat-form-field appearance="fill">
                        <mat-label>Blood Type</mat-label>
                        <input matInput formControlName="bloodType">
                    </mat-form-field>
                </div>

                <mat-card-actions style="text-align: right;">
                    <button mat-button matStepperPrevious>BACK</button>
                    <button mat-button matStepperNext>NEXT</button>
                </mat-card-actions>

            </mat-card>

        </mat-step>

        <mat-step optional>

            <ng-template matStepLabel>Allergies</ng-template>

            <mat-card>

                <button mat-raised-button type="button" color="primary" (click)="addAllergy()" style="margin-bottom: 10px;width:100%;">Add new allergy</button>
                <div *ngFor="let control of allergys.controls; index as i">
                    <mat-form-field appearance="fill">
                        <mat-label>Allergy {{ i+1 }}</mat-label>
                        <input matInput [formControl]="control">
                    </mat-form-field>
                </div>

                <mat-card-actions style="text-align: right;">
                    <button mat-button matStepperPrevious>BACK</button>
                    <button mat-button matStepperNext>NEXT</button>
                </mat-card-actions>

            </mat-card>

        </mat-step>

        <mat-step optional>

            <ng-template matStepLabel>History</ng-template>

            <mat-card>

                <button mat-raised-button type="button" color="primary" (click)="addMedicalHistory()" style="margin-bottom: 10px;width:100%;">Add medical history</button>
                <div *ngFor="let control of medicalHistorys.controls; index as i">
                    <mat-form-field appearance="fill">
                        <mat-label>Medical history {{ i+1 }}</mat-label>
                        <input matInput [formControl]="control">
                    </mat-form-field>
                </div>

                <button mat-raised-button type="button" color="primary" (click)="addFamilyHistory()" style="margin-bottom: 10px;width:100%;">Add family history</button>
                <div *ngFor="let control of familyHistorys.controls; index as i">
                    <mat-form-field appearance="fill">
                        <mat-label>Family history {{ i+1 }}</mat-label>
                        <input matInput [formControl]="control">
                    </mat-form-field>
                </div>
                
                <button mat-raised-button type="button" color="primary" (click)="addVaccination()" style="margin-bottom: 10px;width:100%;">Add vaccination</button>
                <div *ngFor="let control of vaccinations.controls; index as i">
                    <mat-form-field appearance="fill">
                        <mat-label>Vaccination {{ i+1 }}</mat-label>
                        <input matInput [formControl]="control">
                    </mat-form-field>
                </div>

                <mat-card-actions style="text-align: right;">
                    <button mat-button matStepperPrevious>BACK</button>
                    <button mat-button matStepperNext color="primary" [disabled]="accountForm.invalid || detailsForm.invalid" (click)="onSubmit()">SUBMIT</button>
                </mat-card-actions>

            </mat-card>

        </mat-step>

    </mat-horizontal-stepper>
</div>